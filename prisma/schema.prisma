// *** GENERATED BY PRISMIX :: DO NOT EDIT ***
datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model Users {
  id                Int                 @id @default(autoincrement())
  firstName         String
  lastName          String
  age               Int?
  email             String              @unique
  password          String
  avatar            String?
  acceptTerms       Boolean             @default(false)
  isOnline          Boolean             @default(false)
  createdAt         DateTime            @default(now())
  tokens            UserTokens[]        @relation(name: "UserTokensToUsers")
  messages          Messages[]          @relation(name: "MessagesToUsers")
  userConversations UserConversations[] @relation(name: "UserConversationsToUsers")
}

model UserTokens {
  id               Int      @id @default(autoincrement())
  refreshTokenHash String
  user             Users    @relation(name: "UserTokensToUsers", fields: [userId], references: [id])
  userId           Int
  createdAt        DateTime @default(now())
}

model UserConversations {
  id             Int           @id @default(autoincrement())
  conversation   Conversations @relation(name: "ConversationsToUserConversations", fields: [conversationId], references: [id])
  conversationId Int
  user           Users         @relation(name: "UserConversationsToUsers", fields: [userId], references: [id])
  userId         Int
}

model Conversations {
  id                Int                 @id @default(autoincrement())
  type              String
  createdAt         DateTime            @default(now())
  messages          Messages[]          @relation(name: "ConversationsToMessages")
  userConversations UserConversations[] @relation(name: "ConversationsToUserConversations")
}

model Messages {
  id             Int           @id @default(autoincrement())
  text           String
  isRead         Boolean       @default(false)
  createdAt      DateTime      @default(now())
  conversation   Conversations @relation(name: "ConversationsToMessages", fields: [conversationId], references: [id])
  conversationId Int
  user           Users         @relation(name: "MessagesToUsers", fields: [userId], references: [id])
  userId         Int
}

model Terms {
  id        Int      @id @default(autoincrement())
  title     String   @db.VarChar(100)
  text      String   @db.Text
  createdAt DateTime @default(now())
}
